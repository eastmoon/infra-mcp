# Docker-Compose document
# Ref : https://docs.docker.com/compose/compose-file/

services:
  mcp-server:
    build:
      context: mcp
    container_name: docker-server_${PROJECT_NAME}
    restart: always
    ports:
      - 8000:80
    environment:
      - MCP_SERVER_NAME="MCP Server"
    networks:
      - modelcontextprotocol-net
    volumes:
      - ${SOURCE_DIR}/server:/app
    working_dir: /app

  mcp-client:
    build:
      context: mcp
    container_name: docker-client_${PROJECT_NAME}
    restart: always
    networks:
      - modelcontextprotocol-net
    volumes:
      - ${SOURCE_DIR}/client:/app
    working_dir: /app
    command: ["sleep", "infinity"]

  inspector:
    build:
      context: inspector
    container_name: docker-inspector_${PROJECT_NAME}
    restart: always
    ports:
      - 6274:6274
      - 6277:6277
    networks:
      - modelcontextprotocol-net

networks:
  modelcontextprotocol-net:
    driver: bridge
